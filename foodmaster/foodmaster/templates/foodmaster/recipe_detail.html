{% extends 'foodmaster/base.html' %}

{% block title %}Food Master - {{ recipe.name|default:"Spaghetti Carbonara" }}{% endblock %}

{% block content %}
<div class="wireframe-section">
  <div class="recipe-detail" style="display: flex; gap: 80px; align-items: flex-start;">
    
    <!-- LEFT COLUMN: Recipe Image + Nearby Markets -->
    <div style="flex: 1;">
      <!-- Recipe Image -->
      <div class="recipe-image" style="
        width: 100%;
        height: 200px;
        background-color: #f0f0f0;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
      ">
        [Recipe Image]
      </div>
      
      <!-- Nearby Markets -->
      <div class="nearby-markets" style="margin-top: 20px;">
        <h3>Nearby Markets</h3>
        
        <!-- Market 1 -->
        <div class="market-card" style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
          <div style="font-weight: bold;">Trader Joe's</div>
          <div>General Grocery • 0.6 miles</div>
          <div>⭐ 4.5 (276 reviews)</div>
          <div style="color: #4CAF50;">Open • Closes at 9:00 PM</div>
          <div style="margin-top: 5px;">
            <span class="tag">Organic</span>
            <span class="tag">Budget-friendly</span>
            <span class="tag">General</span>
          </div>
        </div>
        
        <!-- Market 2 -->
        <div class="market-card" style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
          <div style="font-weight: bold;">H Mart</div>
          <div>Asian Grocery • 1.3 miles</div>
          <div>⭐ 4.6 (193 reviews)</div>
          <div style="color: #4CAF50;">Open • Closes at 10:00 PM</div>
          <div style="margin-top: 5px;">
            <span class="tag">Korean</span>
            <span class="tag">Japanese</span>
            <span class="tag">Chinese</span>
          </div>
        </div>
        
        <!-- Market 3 -->
        <div class="market-card" style="margin-bottom: 15px;">
          <div style="font-weight: bold;">Whole Foods Market</div>
          <div>Organic Grocery • 1.8 miles</div>
          <div>⭐ 4.4 (325 reviews)</div>
          <div style="color: #4CAF50;">Open • Closes at 11:00 PM</div>
          <div style="margin-top: 5px;">
            <span class="tag">Organic</span>
            <span class="tag">Premium</span>
            <span class="tag">Health Foods</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- RIGHT COLUMN: Recipe Content -->
    <div class="recipe-content" style="flex: 1;">
      <h2>{{ recipe.name|default:"Spaghetti Carbonara" }}</h2>
      <div style="margin-bottom: 20px;">
        <span>{{ recipe.cuisine|default:"Italian" }} • {{ recipe.time|default:"25 min" }} • {{ recipe.difficulty|default:"Easy" }} • </span>
        <span>⭐ {{ recipe.rating|default:"4.8" }} ({{ recipe.reviews|default:"156" }} reviews)</span>
      </div>

      <div style="display: flex; gap: 10px; margin-bottom: 30px;">
        <button class="btn btn-primary">Add to Shopping List</button>
        <button class="btn btn-secondary">Save Recipe</button>
        <button class="btn btn-secondary">Share</button>
      </div>
      
      <!-- Times (No Servings Adjustment) -->
      <div style="display: flex; gap: 20px; margin-bottom: 30px;">
        <div style="flex: 1; padding: 15px; background-color: #f9f9f9; border-radius: 8px; text-align: center;">
          <div style="font-weight: bold;">Prep Time</div>
          <div>{{ recipe.prep_time|default:"10 min" }}</div>
        </div>
        <div style="flex: 1; padding: 15px; background-color: #f9f9f9; border-radius: 8px; text-align: center;">
          <div style="font-weight: bold;">Cook Time</div>
          <div>{{ recipe.cook_time|default:"15 min" }}</div>
        </div>
      </div>
      
      <div class="tabs" style="display: flex; gap: 10px; margin-bottom: 20px;">
        <div class="tab active" style="cursor: pointer; font-weight: bold;">Ingredients</div>
        <div class="tab" style="cursor: pointer;">Instructions</div>
        <div class="tab" style="cursor: pointer;">Nutrition</div>
        <div class="tab" style="cursor: pointer;">Reviews</div>
      </div>

      <!-- Ingredient List (Checkboxes Instead of "Add" Buttons) -->
      <div class="ingredient-list">
        <h3>Ingredients</h3>
        
        {% if recipe.ingredients %}
          {% for ingredient in recipe.ingredients %}
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>{{ ingredient.amount }} {{ ingredient.name }}</span>
          </div>
          {% endfor %}
        {% else %}
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>400g spaghetti</span>
          </div>
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>200g pancetta or guanciale, diced</span>
          </div>
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>4 large eggs</span>
          </div>
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>50g Pecorino Romano cheese, grated</span>
          </div>
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>50g Parmesan cheese, grated</span>
          </div>
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>Freshly ground black pepper</span>
          </div>
          <div class="ingredient-item" style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <input type="checkbox" style="transform: scale(1.3);" />
            <span>Salt, to taste</span>
          </div>
        {% endif %}
        
        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;">Add All to Shopping List</button>
      </div>
    </div>
    
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Tab functionality
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        // In a real app, you would show/hide content based on the selected tab
      });
    });
  });
</script>
{% endblock %}